pipeline {
    agent any

    environment {
        SONAR_TOKEN_CREDENTIAL_ID = 'jenkinsSonar' // Replace with your credential ID
        SONAR_INSTALLATION_NAME = 'SonarScanner' // Replace with your SonarQube installation name
    }

    stages {
        stage('SonarQube Analysis') {
            steps {
                script {
                    def scannerHome = tool name: 'SonarScanner', type: 'hudson.plugins.sonar.SonarRunnerInstallation'

                    withSonarQubeEnv(SONAR_INSTALLATION_NAME) {
                        sh """${scannerHome}bin/sonar-scanner -Dsonar.sources=src -Dsonar.login=\$(SONAR_TOKEN)"""

                    }
                }
            }
        }

         stage('Build Angular App') {
            steps {
                sh '''
                    #!/bin/bash
                    npm install
                    ng build --prod
                '''
            }
        }




    }
}
